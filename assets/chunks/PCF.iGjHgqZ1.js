import{d as kt,o as ne,c as ie,r as Ki,p as V,h as rn,v as Qi,q as vn,j as he,t as jt,e as Xt,F as oi,B as Ji,G as st,ai as Vi,w as er,af as tr,ag as nr,W as ir,a as rr,_ as ar}from"./framework.jB394sxJ.js";var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge={},fe={},M={},ke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseRotation=e.parseRotationName=e.Rotation=e.parsePiece=e.parsePieceName=e.isMinoPiece=e.Piece=void 0;var n;(function(c){c[c.Empty=0]="Empty",c[c.I=1]="I",c[c.L=2]="L",c[c.O=3]="O",c[c.Z=4]="Z",c[c.T=5]="T",c[c.J=6]="J",c[c.S=7]="S",c[c.Gray=8]="Gray"})(n=e.Piece||(e.Piece={}));function t(c){return c!==n.Empty&&c!==n.Gray}e.isMinoPiece=t;function r(c){switch(c){case n.I:return"I";case n.L:return"L";case n.O:return"O";case n.Z:return"Z";case n.T:return"T";case n.J:return"J";case n.S:return"S";case n.Gray:return"X";case n.Empty:return"_"}throw new Error("Unknown piece: ".concat(c))}e.parsePieceName=r;function i(c){switch(c.toUpperCase()){case"I":return n.I;case"L":return n.L;case"O":return n.O;case"Z":return n.Z;case"T":return n.T;case"J":return n.J;case"S":return n.S;case"X":case"GRAY":return n.Gray;case" ":case"_":case"EMPTY":return n.Empty}throw new Error("Unknown piece: ".concat(c))}e.parsePiece=i;var a;(function(c){c[c.Spawn=0]="Spawn",c[c.Right=1]="Right",c[c.Reverse=2]="Reverse",c[c.Left=3]="Left"})(a=e.Rotation||(e.Rotation={}));function f(c){switch(c){case a.Spawn:return"spawn";case a.Left:return"left";case a.Right:return"right";case a.Reverse:return"reverse"}throw new Error("Unknown rotation: ".concat(c))}e.parseRotationName=f;function l(c){switch(c.toLowerCase()){case"spawn":return a.Spawn;case"left":return a.Left;case"right":return a.Right;case"reverse":return a.Reverse}throw new Error("Unknown rotation: ".concat(c))}e.parseRotation=l})(ke);Object.defineProperty(M,"__esModule",{value:!0});M.getPieces=M.getBlocks=M.getBlockXYs=M.getBlockPositions=M.PlayField=M.InnerField=M.createInnerField=M.createNewInnerField=void 0;var N=ke,P={Width:10,Height:23,PlayBlocks:23*10};function or(){return new an({})}M.createNewInnerField=or;function lr(e){for(var n=new an({}),t=-1;t<P.Height;t+=1)for(var r=0;r<P.Width;r+=1){var i=e.at(r,t);n.setNumberAt(r,t,(0,N.parsePiece)(i))}return n}M.createInnerField=lr;var an=function(){function e(n){var t=n.field,r=t===void 0?e.create(P.PlayBlocks):t,i=n.garbage,a=i===void 0?e.create(P.Width):i;this.field=r,this.garbage=a}return e.create=function(n){return new li({length:n})},e.prototype.fill=function(n){this.field.fill(n)},e.prototype.fillAll=function(n,t){this.field.fillAll(n,t)},e.prototype.canFill=function(n,t,r,i){var a=this,f=fi(n,t,r,i);return f.every(function(l){var c=l[0],o=l[1];return 0<=c&&c<10&&0<=o&&o<P.Height&&a.getNumberAt(c,o)===N.Piece.Empty})},e.prototype.canFillAll=function(n){var t=this;return n.every(function(r){var i=r.x,a=r.y;return 0<=i&&i<10&&0<=a&&a<P.Height&&t.getNumberAt(i,a)===N.Piece.Empty})},e.prototype.isOnGround=function(n,t,r,i){return!this.canFill(n,t,r,i-1)},e.prototype.clearLine=function(){this.field.clearLine()},e.prototype.riseGarbage=function(){this.field.up(this.garbage),this.garbage.clearAll()},e.prototype.mirror=function(){this.field.mirror()},e.prototype.shiftToLeft=function(){this.field.shiftToLeft()},e.prototype.shiftToRight=function(){this.field.shiftToRight()},e.prototype.shiftToUp=function(){this.field.shiftToUp()},e.prototype.shiftToBottom=function(){this.field.shiftToBottom()},e.prototype.copy=function(){return new e({field:this.field.copy(),garbage:this.garbage.copy()})},e.prototype.equals=function(n){return this.field.equals(n.field)&&this.garbage.equals(n.garbage)},e.prototype.addNumber=function(n,t,r){0<=t?this.field.addOffset(n,t,r):this.garbage.addOffset(n,-(t+1),r)},e.prototype.setNumberFieldAt=function(n,t){this.field.setAt(n,t)},e.prototype.setNumberGarbageAt=function(n,t){this.garbage.setAt(n,t)},e.prototype.setNumberAt=function(n,t,r){return 0<=t?this.field.set(n,t,r):this.garbage.set(n,-(t+1),r)},e.prototype.getNumberAt=function(n,t){return 0<=t?this.field.get(n,t):this.garbage.get(n,-(t+1))},e.prototype.getNumberAtIndex=function(n,t){return t?this.getNumberAt(n%10,Math.floor(n/10)):this.getNumberAt(n%10,-(Math.floor(n/10)+1))},e.prototype.toFieldNumberArray=function(){return this.field.toArray()},e.prototype.toGarbageNumberArray=function(){return this.garbage.toArray()},e}();M.InnerField=an;var li=function(){function e(n){var t=n.pieces,r=n.length,i=r===void 0?P.PlayBlocks:r;t!==void 0?this.pieces=t:this.pieces=Array.from({length:i}).map(function(){return N.Piece.Empty}),this.length=i}return e.load=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=n.join("").trim();return e.loadInner(r)},e.loadMinify=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=n.join("").trim();return e.loadInner(r,r.length)},e.loadInner=function(n,t){var r=t!==void 0?t:n.length;if(r%10!==0)throw new Error("Num of blocks in field should be mod 10");for(var i=t!==void 0?new e({length:t}):new e({}),a=0;a<r;a+=1){var f=n[a];i.set(a%10,Math.floor((r-a-1)/10),(0,N.parsePiece)(f))}return i},e.prototype.get=function(n,t){return this.pieces[n+t*P.Width]},e.prototype.addOffset=function(n,t,r){this.pieces[n+t*P.Width]+=r},e.prototype.set=function(n,t,r){this.setAt(n+t*P.Width,r)},e.prototype.setAt=function(n,t){this.pieces[n]=t},e.prototype.fill=function(n){for(var t=n.type,r=n.rotation,i=n.x,a=n.y,f=Et(t,r),l=0,c=f;l<c.length;l++){var o=c[l],s=[i+o[0],a+o[1]],p=s[0],d=s[1];this.set(p,d,t)}},e.prototype.fillAll=function(n,t){for(var r=0,i=n;r<i.length;r++){var a=i[r],f=a.x,l=a.y;this.set(f,l,t)}},e.prototype.clearLine=function(){for(var n=this.pieces.concat(),t=this.pieces.length/P.Width-1,r=t;0<=r;r-=1){var i=this.pieces.slice(r*P.Width,(r+1)*P.Width),a=i.every(function(c){return c!==N.Piece.Empty});if(a){var f=n.slice(0,r*P.Width),l=n.slice((r+1)*P.Width);n=f.concat(l,Array.from({length:P.Width}).map(function(){return N.Piece.Empty}))}}this.pieces=n},e.prototype.up=function(n){this.pieces=n.pieces.concat(this.pieces).slice(0,this.length)},e.prototype.mirror=function(){for(var n=[],t=0;t<this.pieces.length;t+=1){var r=this.pieces.slice(t*P.Width,(t+1)*P.Width);r.reverse();for(var i=0,a=r;i<a.length;i++){var f=a[i];n.push(f)}}this.pieces=n},e.prototype.shiftToLeft=function(){for(var n=this.pieces.length/10,t=0;t<n;t+=1){for(var r=0;r<P.Width-1;r+=1)this.pieces[r+t*P.Width]=this.pieces[r+1+t*P.Width];this.pieces[9+t*P.Width]=N.Piece.Empty}},e.prototype.shiftToRight=function(){for(var n=this.pieces.length/10,t=0;t<n;t+=1){for(var r=P.Width-1;1<=r;r-=1)this.pieces[r+t*P.Width]=this.pieces[r-1+t*P.Width];this.pieces[t*P.Width]=N.Piece.Empty}},e.prototype.shiftToUp=function(){var n=Array.from({length:10}).map(function(){return N.Piece.Empty});this.pieces=n.concat(this.pieces).slice(0,this.length)},e.prototype.shiftToBottom=function(){var n=Array.from({length:10}).map(function(){return N.Piece.Empty});this.pieces=this.pieces.slice(10,this.length).concat(n)},e.prototype.toArray=function(){return this.pieces.concat()},Object.defineProperty(e.prototype,"numOfBlocks",{get:function(){return this.pieces.length},enumerable:!1,configurable:!0}),e.prototype.copy=function(){return new e({pieces:this.pieces.concat(),length:this.length})},e.prototype.toShallowArray=function(){return this.pieces},e.prototype.clearAll=function(){this.pieces=this.pieces.map(function(){return N.Piece.Empty})},e.prototype.equals=function(n){if(this.pieces.length!==n.pieces.length)return!1;for(var t=0;t<this.pieces.length;t+=1)if(this.pieces[t]!==n.pieces[t])return!1;return!0},e}();M.PlayField=li;function fi(e,n,t,r){return Et(e,n).map(function(i){return i[0]+=t,i[1]+=r,i})}M.getBlockPositions=fi;function fr(e,n,t,r){return Et(e,n).map(function(i){return{x:i[0]+t,y:i[1]+r}})}M.getBlockXYs=fr;function Et(e,n){var t=ci(e);switch(n){case N.Rotation.Spawn:return t;case N.Rotation.Left:return sr(t);case N.Rotation.Reverse:return ur(t);case N.Rotation.Right:return cr(t)}throw new Error("Unsupported block")}M.getBlocks=Et;function ci(e){switch(e){case N.Piece.I:return[[0,0],[-1,0],[1,0],[2,0]];case N.Piece.T:return[[0,0],[-1,0],[1,0],[0,1]];case N.Piece.O:return[[0,0],[1,0],[0,1],[1,1]];case N.Piece.L:return[[0,0],[-1,0],[1,0],[1,1]];case N.Piece.J:return[[0,0],[-1,0],[1,0],[-1,1]];case N.Piece.S:return[[0,0],[-1,0],[0,1],[1,1]];case N.Piece.Z:return[[0,0],[1,0],[0,1],[-1,1]]}throw new Error("Unsupported rotation")}M.getPieces=ci;function cr(e){return e.map(function(n){return[n[1],-n[0]]})}function sr(e){return e.map(function(n){return[-n[1],n[0]]})}function ur(e){return e.map(function(n){return[-n[0],-n[1]]})}var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.Buffer=void 0;var on="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dr=function(){function e(n){n===void 0&&(n=""),this.values=n.split("").map(hr)}return e.prototype.poll=function(n){for(var t=0,r=0;r<n;r+=1){var i=this.values.shift();if(i===void 0)throw new Error("Unexpected fumen");t+=i*Math.pow(e.tableLength,r)}return t},e.prototype.push=function(n,t){t===void 0&&(t=1);for(var r=n,i=0;i<t;i+=1)this.values.push(r%e.tableLength),r=Math.floor(r/e.tableLength)},e.prototype.merge=function(n){for(var t=0,r=n.values;t<r.length;t++){var i=r[t];this.values.push(i)}},e.prototype.isEmpty=function(){return this.values.length===0},Object.defineProperty(e.prototype,"length",{get:function(){return this.values.length},enumerable:!1,configurable:!0}),e.prototype.get=function(n){return this.values[n]},e.prototype.set=function(n,t){this.values[n]=t},e.prototype.toString=function(){return this.values.map(_r).join("")},e.tableLength=on.length,e}();Je.Buffer=dr;function hr(e){return on.indexOf(e)}function _r(e){return on[e]}var be={},gt=Oe&&Oe.__assign||function(){return gt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gt.apply(this,arguments)};Object.defineProperty(be,"__esModule",{value:!0});be.createActionEncoder=be.createActionDecoder=void 0;var k=ke;function De(e){return e!==0}var pr=function(e,n,t){var r=n+t,i=r*e;function a(c){switch(c){case 0:return k.Piece.Empty;case 1:return k.Piece.I;case 2:return k.Piece.L;case 3:return k.Piece.O;case 4:return k.Piece.Z;case 5:return k.Piece.T;case 6:return k.Piece.J;case 7:return k.Piece.S;case 8:return k.Piece.Gray}throw new Error("Unexpected piece")}function f(c){switch(c){case 0:return k.Rotation.Reverse;case 1:return k.Rotation.Right;case 2:return k.Rotation.Spawn;case 3:return k.Rotation.Left}throw new Error("Unexpected rotation")}function l(c,o,s){var p=c%e,d=Math.floor(c/10),u=n-d-1;return o===k.Piece.O&&s===k.Rotation.Left?(p+=1,u-=1):o===k.Piece.O&&s===k.Rotation.Reverse?p+=1:o===k.Piece.O&&s===k.Rotation.Spawn?u-=1:o===k.Piece.I&&s===k.Rotation.Reverse?p+=1:o===k.Piece.I&&s===k.Rotation.Left||o===k.Piece.S&&s===k.Rotation.Spawn?u-=1:o===k.Piece.S&&s===k.Rotation.Right?p-=1:o===k.Piece.Z&&s===k.Rotation.Spawn?u-=1:o===k.Piece.Z&&s===k.Rotation.Left&&(p+=1),{x:p,y:u}}return{decode:function(c){var o=c,s=a(o%8);o=Math.floor(o/8);var p=f(o%4);o=Math.floor(o/4);var d=l(o%i,s,p);o=Math.floor(o/i);var u=De(o%2);o=Math.floor(o/2);var h=De(o%2);o=Math.floor(o/2);var A=De(o%2);o=Math.floor(o/2);var v=De(o%2);o=Math.floor(o/2);var x=!De(o%2);return{rise:u,mirror:h,colorize:A,comment:v,lock:x,piece:gt(gt({},d),{type:s,rotation:p})}}}};be.createActionDecoder=pr;function Ne(e){return e?1:0}var vr=function(e,n,t){var r=n+t,i=r*e;function a(l){var c=l.type,o=l.rotation,s=l.x,p=l.y;return(0,k.isMinoPiece)(c)?c===k.Piece.O&&o===k.Rotation.Left?(s-=1,p+=1):c===k.Piece.O&&o===k.Rotation.Reverse?s-=1:c===k.Piece.O&&o===k.Rotation.Spawn?p+=1:c===k.Piece.I&&o===k.Rotation.Reverse?s-=1:c===k.Piece.I&&o===k.Rotation.Left||c===k.Piece.S&&o===k.Rotation.Spawn?p+=1:c===k.Piece.S&&o===k.Rotation.Right?s+=1:c===k.Piece.Z&&o===k.Rotation.Spawn?p+=1:c===k.Piece.Z&&o===k.Rotation.Left&&(s-=1):(s=0,p=22),(n-p-1)*e+s}function f(l){var c=l.type,o=l.rotation;if(!(0,k.isMinoPiece)(c))return 0;switch(o){case k.Rotation.Reverse:return 0;case k.Rotation.Right:return 1;case k.Rotation.Spawn:return 2;case k.Rotation.Left:return 3}throw new Error("No reachable")}return{encode:function(l){var c=l.lock,o=l.comment,s=l.colorize,p=l.mirror,d=l.rise,u=l.piece,h=Ne(!c);return h*=2,h+=Ne(o),h*=2,h+=Ne(s),h*=2,h+=Ne(p),h*=2,h+=Ne(d),h*=i,h+=a(u),h*=4,h+=f(u),h*=8,h+=u.type,h}}};be.createActionEncoder=vr;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createCommentParser=void 0;var Yt=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",Ot=Yt.length+1,gr=function(){return{decode:function(e){for(var n="",t=e,r=0;r<4;r+=1){var i=t%Ot;n+=Yt[i],t=Math.floor(t/Ot)}return n},encode:function(e,n){return Yt.indexOf(e)*Math.pow(Ot,n)}}};Ve.createCommentParser=gr;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.Quiz=void 0;var de=ke,J;(function(e){e.Direct="direct",e.Swap="swap",e.Stock="stock"})(J||(J={}));var br=function(){function e(n){this.quiz=e.verify(n)}return Object.defineProperty(e.prototype,"next",{get:function(){var n=this.quiz.indexOf(")")+1,t=this.quiz[n];return t===void 0||t===";"?"":t},enumerable:!1,configurable:!0}),e.isQuizComment=function(n){return n.startsWith("#Q=")},e.create=function(n,t){var r=function(i,a){var f=function(l){return l||""};return new e("#Q=[".concat(f(i),"](").concat(f(a[0]),")").concat(f(a.substring(1))))};return t!==void 0?r(n,t):r(void 0,n)},e.trim=function(n){return n.trim().replace(/\s+/g,"")},Object.defineProperty(e.prototype,"least",{get:function(){var n=this.quiz.indexOf(")");return this.quiz.substr(n+1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){var n=this.quiz.indexOf("(")+1,t=this.quiz[n];return t===")"?"":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hold",{get:function(){var n=this.quiz.indexOf("[")+1,t=this.quiz[n];return t==="]"?"":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leastAfterNext2",{get:function(){var n=this.quiz.indexOf(")");return this.quiz[n+1]===";"?this.quiz.substr(n+1):this.quiz.substr(n+2)},enumerable:!1,configurable:!0}),e.prototype.getOperation=function(n){var t=(0,de.parsePieceName)(n),r=this.current;if(t===r)return J.Direct;var i=this.hold;if(t===i)return J.Swap;if(i===""){if(t===this.next)return J.Stock}else if(r===""&&t===this.next)return J.Direct;throw new Error("Unexpected hold piece in quiz: ".concat(this.quiz))},Object.defineProperty(e.prototype,"leastInActiveBag",{get:function(){var n=this.quiz.indexOf(";"),t=0<=n?this.quiz.substring(0,n):this.quiz,r=t.indexOf(")");return t[r+1]===";"?t.substr(r+1):t.substr(r+2)},enumerable:!1,configurable:!0}),e.verify=function(n){var t=this.trim(n);if(t.length===0||n==="#Q=[]()"||!n.startsWith("#Q="))return n;if(!t.match(/^#Q=\[[TIOSZJL]?]\([TIOSZJL]?\)[TIOSZJL]*;?.*$/i))throw new Error("Current piece doesn't exist, however next pieces exist: ".concat(n));return t},e.prototype.direct=function(){if(this.current===""){var n=this.leastAfterNext2;return new e("#Q=[".concat(this.hold,"](").concat(n[0],")").concat(n.substr(1)))}return new e("#Q=[".concat(this.hold,"](").concat(this.next,")").concat(this.leastAfterNext2))},e.prototype.swap=function(){if(this.hold==="")throw new Error("Cannot find hold piece: ".concat(this.quiz));var n=this.next;return new e("#Q=[".concat(this.current,"](").concat(n,")").concat(this.leastAfterNext2))},e.prototype.stock=function(){if(this.hold!==""||this.next==="")throw new Error("Cannot stock: ".concat(this.quiz));var n=this.leastAfterNext2,t=n[0]!==void 0?n[0]:"";return 1<n.length?new e("#Q=[".concat(this.current,"](").concat(t,")").concat(n.substr(1))):new e("#Q=[".concat(this.current,"](").concat(t,")"))},e.prototype.operate=function(n){switch(n){case J.Direct:return this.direct();case J.Swap:return this.swap();case J.Stock:return this.stock()}throw new Error("Unexpected operation")},e.prototype.format=function(){var n=this.nextIfEnd();if(n.quiz==="#Q=[]()")return new e("");var t=n.current,r=n.hold;if(t===""&&r!=="")return new e("#Q=[](".concat(r,")").concat(n.least));if(t===""){var i=n.least,a=i[0];return a===void 0?new e(""):a===";"?new e(i.substr(1)):new e("#Q=[](".concat(a,")").concat(i.substr(1)))}return n},e.prototype.getHoldPiece=function(){if(!this.canOperate())return de.Piece.Empty;var n=this.hold;return n===void 0||n===""||n===";"?de.Piece.Empty:(0,de.parsePiece)(n)},e.prototype.getNextPieces=function(n){if(!this.canOperate())return n!==void 0?Array.from({length:n}).map(function(){return de.Piece.Empty}):[];var t=(this.current+this.next+this.leastInActiveBag).substr(0,n);return n!==void 0&&t.length<n&&(t+=" ".repeat(n-t.length)),t.split("").map(function(r){return r===void 0||r===" "||r===";"?de.Piece.Empty:(0,de.parsePiece)(r)})},e.prototype.toString=function(){return this.quiz},e.prototype.canOperate=function(){var n=this.quiz;return n.startsWith("#Q=[]();")&&(n=this.quiz.substr(8)),n.startsWith("#Q=")&&n!=="#Q=[]()"},e.prototype.nextIfEnd=function(){return this.quiz.startsWith("#Q=[]();")?new e(this.quiz.substr(8)):this},e}();et.Quiz=br;var we={},bt=Oe&&Oe.__assign||function(){return bt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bt.apply(this,arguments)};Object.defineProperty(we,"__esModule",{value:!0});we.Mino=we.Field=void 0;var ut=M,_e=ke;function It(e){return e instanceof Kt?e.copy():Kt.from(e)}var wr=function(){function e(n){this.field=n}return e.create=function(n,t){return new e(new ut.InnerField({field:n!==void 0?ut.PlayField.load(n):void 0,garbage:t!==void 0?ut.PlayField.loadMinify(t):void 0}))},e.prototype.canFill=function(n){if(n===void 0)return!0;var t=It(n);return this.field.canFillAll(t.positions())},e.prototype.canLock=function(n){return n===void 0?!0:this.canFill(n)?!this.canFill(bt(bt({},n),{y:n.y-1})):!1},e.prototype.fill=function(n,t){if(t===void 0&&(t=!1),n!==void 0){var r=It(n);if(!t&&!this.canFill(r))throw Error("Cannot fill piece on field");return this.field.fillAll(r.positions(),(0,_e.parsePiece)(r.type)),r}},e.prototype.put=function(n){if(n!==void 0){for(var t=It(n);0<=t.y;t.y-=1)if(this.canLock(t))return this.fill(t),t;throw Error("Cannot put piece on field")}},e.prototype.clearLine=function(){this.field.clearLine()},e.prototype.at=function(n,t){return(0,_e.parsePieceName)(this.field.getNumberAt(n,t))},e.prototype.set=function(n,t,r){this.field.setNumberAt(n,t,(0,_e.parsePiece)(r))},e.prototype.copy=function(){return new e(this.field.copy())},e.prototype.str=function(n){n===void 0&&(n={});for(var t=n.reduced!==void 0?n.reduced:!0,r=n.separator!==void 0?n.separator:`
`,i=n.garbage===void 0||n.garbage?-1:0,a="",f=22;i<=f;f-=1){for(var l="",c=0;c<10;c+=1)l+=this.at(c,f);t&&l==="__________"||(t=!1,a+=l,f!==i&&(a+=r))}return a},e}();we.Field=wr;var Kt=function(){function e(n,t,r,i){this.type=n,this.rotation=t,this.x=r,this.y=i}return e.from=function(n){return new e(n.type,n.rotation,n.x,n.y)},e.prototype.positions=function(){return(0,ut.getBlockXYs)((0,_e.parsePiece)(this.type),(0,_e.parseRotation)(this.rotation),this.x,this.y).sort(function(n,t){return n.y===t.y?n.x-t.x:n.y-t.y})},e.prototype.operation=function(){return{type:this.type,rotation:this.rotation,x:this.x,y:this.y}},e.prototype.isValid=function(){try{(0,_e.parsePiece)(this.type),(0,_e.parseRotation)(this.rotation)}catch{return!1}return this.positions().every(function(n){var t=n.x,r=n.y;return 0<=t&&t<10&&0<=r&&r<23})},e.prototype.copy=function(){return new e(this.type,this.rotation,this.x,this.y)},e}();we.Mino=Kt;Object.defineProperty(fe,"__esModule",{value:!0});fe.decode=fe.extract=fe.Page=void 0;var si=M,yr=Je,Me=ke,mr=be,xr=Ve,gn=et,Qt=we,ui=function(){function e(n,t,r,i,a,f){this.index=n,this.operation=r,this.comment=i,this.flags=a,this.refs=f,this._field=t.copy()}return Object.defineProperty(e.prototype,"field",{get:function(){return new Qt.Field(this._field.copy())},set:function(n){this._field=(0,si.createInnerField)(n)},enumerable:!1,configurable:!0}),e.prototype.mino=function(){return Qt.Mino.from(this.operation)},e}();fe.Page=ui;var Ae={GarbageLine:1,Width:10};function di(e){var n=function(f,l){var c=l.trim().replace(/[?\s]+/g,"");return{version:f,data:c}},t=e,r=t.indexOf("&");0<=r&&(t=t.substring(0,r));{var i=e.match(/[vmd]115@/);if(i!=null&&i.index!==void 0){var a=t.substr(i.index+5);return n("115",a)}}{var i=e.match(/[vmd]110@/);if(i!=null&&i.index!==void 0){var a=t.substr(i.index+5);return n("110",a)}}throw new Error("Unsupported fumen version")}fe.extract=di;function kr(e){var n=di(e),t=n.version,r=n.data;switch(t){case"115":return bn(r,23);case"110":return bn(r,21)}throw new Error("Unsupported fumen version")}fe.decode=kr;function bn(e,n){for(var t=n+Ae.GarbageLine,r=t*Ae.Width,i=new yr.Buffer(e),a=function(U){for(var B={changed:!0,field:U},q=0;q<r;){var Tt=i.poll(2),hn=Math.floor(Tt/r),_n=Tt%r;hn===8&&_n===r-1&&(B.changed=!1);for(var pn=0;pn<_n+1;pn+=1){var Xi=q%Ae.Width,Yi=n-Math.floor(q/Ae.Width)-1;B.field.addNumber(Xi,Yi,hn-8),q+=1}}return B},f=0,l=(0,si.createNewInnerField)(),c={repeatCount:-1,refIndex:{comment:0,field:0},quiz:void 0,lastCommentText:""},o=[],s=(0,mr.createActionDecoder)(Ae.Width,n,Ae.GarbageLine),p=(0,xr.createCommentParser)();!i.isEmpty();){var d=void 0;0<c.repeatCount?(d={field:l,changed:!1},c.repeatCount-=1):(d=a(l.copy()),d.changed||(c.repeatCount=i.poll(1)));var u=i.poll(3),h=s.decode(u),A=void 0;if(h.comment){for(var v=[],x=i.poll(2),z=0;z<Math.floor((x+3)/4);z+=1){var E=i.poll(5);v.push(E)}for(var _="",S=0,I=v;S<I.length;S++){var m=I[S];_+=p.decode(m)}var w=unescape(_.slice(0,x));c.lastCommentText=w,A={text:w},c.refIndex.comment=f;var y=A.text;if(gn.Quiz.isQuizComment(y))try{c.quiz=new gn.Quiz(y)}catch{c.quiz=void 0}else c.quiz=void 0}else f===0?A={text:""}:A={text:c.quiz!==void 0?c.quiz.format().toString():void 0,ref:c.refIndex.comment};var g=!1;if(c.quiz!==void 0&&(g=!0,c.quiz.canOperate()&&h.lock))if((0,Me.isMinoPiece)(h.piece.type))try{var b=c.quiz.nextIfEnd(),O=b.getOperation(h.piece.type);c.quiz=b.operate(O)}catch{c.quiz=c.quiz.format()}else c.quiz=c.quiz.format();var L=void 0;h.piece.type!==Me.Piece.Empty&&(L=h.piece);var H=void 0;d.changed||f===0?(H={},c.refIndex.field=f):H={ref:c.refIndex.field},o.push(new ui(f,d.field,L!==void 0?Qt.Mino.from({type:(0,Me.parsePieceName)(L.type),rotation:(0,Me.parseRotationName)(L.rotation),x:L.x,y:L.y}):void 0,A.text!==void 0?A.text:c.lastCommentText,{quiz:g,lock:h.lock,mirror:h.mirror,colorize:h.colorize,rise:h.rise},{field:H.ref,comment:A.ref})),f+=1,h.lock&&((0,Me.isMinoPiece)(h.piece.type)&&d.field.fill(h.piece),d.field.clearLine(),h.rise&&d.field.riseGarbage(),h.mirror&&d.field.mirror()),l=d.field}return o}var At={},Jt=Oe&&Oe.__assign||function(){return Jt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jt.apply(this,arguments)};Object.defineProperty(At,"__esModule",{value:!0});At.encode=void 0;var wn=M,dt=Je,Se=ke,Er=be,Ar=Ve,Sr=et,wt={GarbageLine:1,Width:10};function zr(e){for(var n=function(A,v){var x=Rr(A,v),z=x.changed,E=x.values;if(z)r.merge(E),t=-1;else if(t<0||r.get(t)===dt.Buffer.tableLength-1)r.merge(E),r.push(0),t=r.length-1;else if(r.get(t)<dt.Buffer.tableLength-1){var _=r.get(t);r.set(t,_+1)}},t=-1,r=new dt.Buffer,i=(0,wn.createNewInnerField)(),a=(0,Er.createActionEncoder)(wt.Width,23,wt.GarbageLine),f=(0,Ar.createCommentParser)(),l="",c=void 0,o=function(A){var v=e[A];v.flags=v.flags?v.flags:{};var x=v.field,z=x!==void 0?(0,wn.createInnerField)(x):i.copy();n(i,z);var E=v.comment!==void 0&&(A!==0||v.comment!=="")?v.comment:void 0,_=v.operation!==void 0?{type:(0,Se.parsePiece)(v.operation.type),rotation:(0,Se.parseRotation)(v.operation.rotation),x:v.operation.x,y:v.operation.y}:{type:Se.Piece.Empty,rotation:Se.Rotation.Reverse,x:0,y:22},S;if(E!==void 0?E.startsWith("#Q=")?c!==void 0&&c.format().toString()===E?S=void 0:(S=E,l=S,c=new Sr.Quiz(E)):c!==void 0&&c.format().toString()===E?(S=void 0,l=E,c=void 0):(S=l!==E?E:void 0,l=l!==E?S:l,c=void 0):(S=void 0,c=void 0),c!==void 0&&c.canOperate()&&v.flags.lock)if((0,Se.isMinoPiece)(_.type))try{var I=c.nextIfEnd(),m=I.getOperation(_.type);c=I.operate(m)}catch{c=c.format()}else c=c.format();var w=Jt({lock:!0,colorize:A===0},v.flags),y={piece:_,rise:!!w.rise,mirror:!!w.mirror,colorize:!!w.colorize,lock:!!w.lock,comment:S!==void 0},g=a.encode(y);if(r.push(g,3),S!==void 0){var b=escape(v.comment),O=Math.min(b.length,4095);r.push(O,2);for(var L=0;L<O;L+=4){for(var H=0,U=0;U<4;U+=1){var B=L+U;if(O<=B)break;var q=b.charAt(B);H+=f.encode(q,U)}r.push(H,5)}}else v.comment===void 0&&(l=void 0);y.lock&&((0,Se.isMinoPiece)(y.piece.type)&&z.fill(y.piece),z.clearLine(),y.rise&&z.riseGarbage(),y.mirror&&z.mirror()),i=z},s=0;s<e.length;s+=1)o(s);var p=r.toString();if(p.length<41)return p;var d=[p.substr(0,42)],u=p.substring(42),h=u.match(/[\S]{1,47}/g)||[];return d.concat(h).join("?")}At.encode=zr;function Rr(e,n){for(var t=23,r=t+1,i=r*wt.Width,a=new dt.Buffer,f=function(h,A){var v=t-A-1;return n.getNumberAt(h,v)-e.getNumberAt(h,v)+8},l=function(h,A){var v=h*i+A;a.push(v,2)},c=!0,o=f(0,0),s=-1,p=0;p<r;p+=1)for(var d=0;d<wt.Width;d+=1){var u=f(d,p);u!==o?(l(o,s),s=0,o=u):s+=1}return l(o,s),o===8&&s===i-1&&(c=!1),{changed:c,values:a}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encoder=e.decoder=e.Mino=e.Field=void 0;var n=fe,t=At,r=we;Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return r.Field}}),Object.defineProperty(e,"Mino",{enumerable:!0,get:function(){return r.Mino}}),e.decoder={decode:function(i){return(0,n.decode)(i)}},e.encoder={encode:function(i){return"v115@".concat((0,t.encode)(i))}}})(ge);const Tr=kt({__name:"TButton",emits:["click"],setup(e,{emit:n}){const t=n;return(r,i)=>(ne(),ie("button",{class:"vt-btn",onClick:i[0]||(i[0]=a=>t("click"))},[Ki(r.$slots,"default")]))}});/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Or=4,yn=0,mn=1,Ir=2;function Le(e){let n=e.length;for(;--n>=0;)e[n]=0}const Lr=0,hi=1,Pr=2,Dr=3,Nr=258,ln=29,tt=256,qe=tt+1+ln,Te=30,fn=19,_i=2*qe+1,pe=15,Lt=16,Mr=7,cn=256,pi=16,vi=17,gi=18,Vt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ht=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Zr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cr=512,ee=new Array((qe+2)*2);Le(ee);const Be=new Array(Te*2);Le(Be);const We=new Array(Cr);Le(We);const Ge=new Array(Nr-Dr+1);Le(Ge);const sn=new Array(ln);Le(sn);const yt=new Array(Te);Le(yt);function Pt(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let wi,yi,mi;function Dt(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}const xi=e=>e<256?We[e]:We[256+(e>>>7)],je=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},$=(e,n,t)=>{e.bi_valid>Lt-t?(e.bi_buf|=n<<e.bi_valid&65535,je(e,e.bi_buf),e.bi_buf=n>>Lt-e.bi_valid,e.bi_valid+=t-Lt):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},Y=(e,n,t)=>{$(e,t[n*2],t[n*2+1])},ki=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},Fr=e=>{e.bi_valid===16?(je(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Ur=(e,n)=>{const t=n.dyn_tree,r=n.max_code,i=n.stat_desc.static_tree,a=n.stat_desc.has_stree,f=n.stat_desc.extra_bits,l=n.stat_desc.extra_base,c=n.stat_desc.max_length;let o,s,p,d,u,h,A=0;for(d=0;d<=pe;d++)e.bl_count[d]=0;for(t[e.heap[e.heap_max]*2+1]=0,o=e.heap_max+1;o<_i;o++)s=e.heap[o],d=t[t[s*2+1]*2+1]+1,d>c&&(d=c,A++),t[s*2+1]=d,!(s>r)&&(e.bl_count[d]++,u=0,s>=l&&(u=f[s-l]),h=t[s*2],e.opt_len+=h*(d+u),a&&(e.static_len+=h*(i[s*2+1]+u)));if(A!==0){do{for(d=c-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,A-=2}while(A>0);for(d=c;d!==0;d--)for(s=e.bl_count[d];s!==0;)p=e.heap[--o],!(p>r)&&(t[p*2+1]!==d&&(e.opt_len+=(d-t[p*2+1])*t[p*2],t[p*2+1]=d),s--)}},Ei=(e,n,t)=>{const r=new Array(pe+1);let i=0,a,f;for(a=1;a<=pe;a++)r[a]=i=i+t[a-1]<<1;for(f=0;f<=n;f++){let l=e[f*2+1];l!==0&&(e[f*2]=ki(r[l]++,l))}},Br=()=>{let e,n,t,r,i;const a=new Array(pe+1);for(t=0,r=0;r<ln-1;r++)for(sn[r]=t,e=0;e<1<<Vt[r];e++)Ge[t++]=r;for(Ge[t-1]=r,i=0,r=0;r<16;r++)for(yt[r]=i,e=0;e<1<<ht[r];e++)We[i++]=r;for(i>>=7;r<Te;r++)for(yt[r]=i<<7,e=0;e<1<<ht[r]-7;e++)We[256+i++]=r;for(n=0;n<=pe;n++)a[n]=0;for(e=0;e<=143;)ee[e*2+1]=8,e++,a[8]++;for(;e<=255;)ee[e*2+1]=9,e++,a[9]++;for(;e<=279;)ee[e*2+1]=7,e++,a[7]++;for(;e<=287;)ee[e*2+1]=8,e++,a[8]++;for(Ei(ee,qe+1,a),e=0;e<Te;e++)Be[e*2+1]=5,Be[e*2]=ki(e,5);wi=new Pt(ee,Vt,tt+1,qe,pe),yi=new Pt(Be,ht,0,Te,pe),mi=new Pt(new Array(0),Zr,0,fn,Mr)},Ai=e=>{let n;for(n=0;n<qe;n++)e.dyn_ltree[n*2]=0;for(n=0;n<Te;n++)e.dyn_dtree[n*2]=0;for(n=0;n<fn;n++)e.bl_tree[n*2]=0;e.dyn_ltree[cn*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Si=e=>{e.bi_valid>8?je(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},$r=(e,n,t,r)=>{Si(e),je(e,t),je(e,~t),e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},xn=(e,n,t,r)=>{const i=n*2,a=t*2;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},Nt=(e,n,t)=>{const r=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&xn(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!xn(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},kn=(e,n,t)=>{let r,i,a=0,f,l;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],i=e.pending_buf[e.l_buf+a],a++,r===0?Y(e,i,n):(f=Ge[i],Y(e,f+tt+1,n),l=Vt[f],l!==0&&(i-=sn[f],$(e,i,l)),r--,f=xi(r),Y(e,f,t),l=ht[f],l!==0&&(r-=yt[f],$(e,r,l)));while(a<e.last_lit);Y(e,cn,n)},en=(e,n)=>{const t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let f,l,c=-1,o;for(e.heap_len=0,e.heap_max=_i,f=0;f<a;f++)t[f*2]!==0?(e.heap[++e.heap_len]=c=f,e.depth[f]=0):t[f*2+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=c<2?++c:0,t[o*2]=1,e.depth[o]=0,e.opt_len--,i&&(e.static_len-=r[o*2+1]);for(n.max_code=c,f=e.heap_len>>1;f>=1;f--)Nt(e,t,f);o=a;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Nt(e,t,1),l=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=l,t[o*2]=t[f*2]+t[l*2],e.depth[o]=(e.depth[f]>=e.depth[l]?e.depth[f]:e.depth[l])+1,t[f*2+1]=t[l*2+1]=o,e.heap[1]=o++,Nt(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Ur(e,n),Ei(t,c,e.bl_count)},En=(e,n,t)=>{let r,i=-1,a,f=n[0*2+1],l=0,c=7,o=4;for(f===0&&(c=138,o=3),n[(t+1)*2+1]=65535,r=0;r<=t;r++)a=f,f=n[(r+1)*2+1],!(++l<c&&a===f)&&(l<o?e.bl_tree[a*2]+=l:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[pi*2]++):l<=10?e.bl_tree[vi*2]++:e.bl_tree[gi*2]++,l=0,i=a,f===0?(c=138,o=3):a===f?(c=6,o=3):(c=7,o=4))},An=(e,n,t)=>{let r,i=-1,a,f=n[0*2+1],l=0,c=7,o=4;for(f===0&&(c=138,o=3),r=0;r<=t;r++)if(a=f,f=n[(r+1)*2+1],!(++l<c&&a===f)){if(l<o)do Y(e,a,e.bl_tree);while(--l!==0);else a!==0?(a!==i&&(Y(e,a,e.bl_tree),l--),Y(e,pi,e.bl_tree),$(e,l-3,2)):l<=10?(Y(e,vi,e.bl_tree),$(e,l-3,3)):(Y(e,gi,e.bl_tree),$(e,l-11,7));l=0,i=a,f===0?(c=138,o=3):a===f?(c=6,o=3):(c=7,o=4)}},Hr=e=>{let n;for(En(e,e.dyn_ltree,e.l_desc.max_code),En(e,e.dyn_dtree,e.d_desc.max_code),en(e,e.bl_desc),n=fn-1;n>=3&&e.bl_tree[bi[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},qr=(e,n,t,r)=>{let i;for($(e,n-257,5),$(e,t-1,5),$(e,r-4,4),i=0;i<r;i++)$(e,e.bl_tree[bi[i]*2+1],3);An(e,e.dyn_ltree,n-1),An(e,e.dyn_dtree,t-1)},Wr=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return yn;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return mn;for(t=32;t<tt;t++)if(e.dyn_ltree[t*2]!==0)return mn;return yn};let Sn=!1;const Gr=e=>{Sn||(Br(),Sn=!0),e.l_desc=new Dt(e.dyn_ltree,wi),e.d_desc=new Dt(e.dyn_dtree,yi),e.bl_desc=new Dt(e.bl_tree,mi),e.bi_buf=0,e.bi_valid=0,Ai(e)},zi=(e,n,t,r)=>{$(e,(Lr<<1)+(r?1:0),3),$r(e,n,t)},jr=e=>{$(e,hi<<1,3),Y(e,cn,ee),Fr(e)},Xr=(e,n,t,r)=>{let i,a,f=0;e.level>0?(e.strm.data_type===Ir&&(e.strm.data_type=Wr(e)),en(e,e.l_desc),en(e,e.d_desc),f=Hr(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?zi(e,n,t,r):e.strategy===Or||a===i?($(e,(hi<<1)+(r?1:0),3),kn(e,ee,Be)):($(e,(Pr<<1)+(r?1:0),3),qr(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),kn(e,e.dyn_ltree,e.dyn_dtree)),Ai(e),r&&Si(e)},Yr=(e,n,t)=>(e.pending_buf[e.d_buf+e.last_lit*2]=n>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=n&255,e.pending_buf[e.l_buf+e.last_lit]=t&255,e.last_lit++,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(Ge[t]+tt+1)*2]++,e.dyn_dtree[xi(n)*2]++),e.last_lit===e.lit_bufsize-1);var Kr=Gr,Qr=zi,Jr=Xr,Vr=Yr,ea=jr,ta={_tr_init:Kr,_tr_stored_block:Qr,_tr_flush_block:Jr,_tr_tally:Vr,_tr_align:ea};const na=(e,n,t,r)=>{let i=e&65535|0,a=e>>>16&65535|0,f=0;for(;t!==0;){f=t>2e3?2e3:t,t-=f;do i=i+n[r++]|0,a=a+i|0;while(--f);i%=65521,a%=65521}return i|a<<16|0};var Xe=na;const ia=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},ra=new Uint32Array(ia()),aa=(e,n,t,r)=>{const i=ra,a=r+t;e^=-1;for(let f=r;f<a;f++)e=e>>>8^i[(e^n[f])&255];return e^-1};var C=aa,Ie={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},nt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:oa,_tr_stored_block:la,_tr_flush_block:fa,_tr_tally:ce,_tr_align:ca}=ta,{Z_NO_FLUSH:Ee,Z_PARTIAL_FLUSH:sa,Z_FULL_FLUSH:ua,Z_FINISH:se,Z_BLOCK:zn,Z_OK:K,Z_STREAM_END:Rn,Z_STREAM_ERROR:W,Z_DATA_ERROR:da,Z_BUF_ERROR:Mt,Z_DEFAULT_COMPRESSION:ha,Z_FILTERED:_a,Z_HUFFMAN_ONLY:at,Z_RLE:pa,Z_FIXED:va,Z_DEFAULT_STRATEGY:ga,Z_UNKNOWN:ba,Z_DEFLATED:St}=nt,wa=9,ya=15,ma=8,xa=29,ka=256,tn=ka+1+xa,Ea=30,Aa=19,Sa=2*tn+1,za=15,R=3,oe=258,j=oe+R+1,Ra=32,zt=42,nn=69,_t=73,pt=91,vt=103,ve=113,Fe=666,Z=1,it=2,ye=3,Pe=4,Ta=3,le=(e,n)=>(e.msg=Ie[n],n),Tn=e=>(e<<1)-(e>4?9:0),ae=e=>{let n=e.length;for(;--n>=0;)e[n]=0};let Oa=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,ue=Oa;const re=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},F=(e,n)=>{fa(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,re(e.strm)},T=(e,n)=>{e.pending_buf[e.pending++]=n},Ze=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},Ia=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Xe(e.adler,n,i,t):e.state.wrap===2&&(e.adler=C(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},Ri=(e,n)=>{let t=e.max_chain_length,r=e.strstart,i,a,f=e.prev_length,l=e.nice_match;const c=e.strstart>e.w_size-j?e.strstart-(e.w_size-j):0,o=e.window,s=e.w_mask,p=e.prev,d=e.strstart+oe;let u=o[r+f-1],h=o[r+f];e.prev_length>=e.good_match&&(t>>=2),l>e.lookahead&&(l=e.lookahead);do if(i=n,!(o[i+f]!==h||o[i+f-1]!==u||o[i]!==o[r]||o[++i]!==o[r+1])){r+=2,i++;do;while(o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&o[++r]===o[++i]&&r<d);if(a=oe-(d-r),r=d-oe,a>f){if(e.match_start=n,f=a,a>=l)break;u=o[r+f-1],h=o[r+f]}}while((n=p[n&s])>c&&--t!==0);return f<=e.lookahead?f:e.lookahead},me=e=>{const n=e.w_size;let t,r,i,a,f;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-j)){e.window.set(e.window.subarray(n,n+n),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,r=e.hash_size,t=r;do i=e.head[--t],e.head[t]=i>=n?i-n:0;while(--r);r=n,t=r;do i=e.prev[--t],e.prev[t]=i>=n?i-n:0;while(--r);a+=n}if(e.strm.avail_in===0)break;if(r=Ia(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=R)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=ue(e,e.ins_h,e.window[f+1]);e.insert&&(e.ins_h=ue(e,e.ins_h,e.window[f+R-1]),e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<R)););}while(e.lookahead<j&&e.strm.avail_in!==0)},La=(e,n)=>{let t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(me(e),e.lookahead===0&&n===Ee)return Z;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+t;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,F(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-j&&(F(e,!1),e.strm.avail_out===0))return Z}return e.insert=0,n===se?(F(e,!0),e.strm.avail_out===0?ye:Pe):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out===0),Z)},Zt=(e,n)=>{let t,r;for(;;){if(e.lookahead<j){if(me(e),e.lookahead<j&&n===Ee)return Z;if(e.lookahead===0)break}if(t=0,e.lookahead>=R&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+R-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-j&&(e.match_length=Ri(e,t)),e.match_length>=R)if(r=ce(e,e.strstart-e.match_start,e.match_length-R),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=R){e.match_length--;do e.strstart++,e.ins_h=ue(e,e.ins_h,e.window[e.strstart+R-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ue(e,e.ins_h,e.window[e.strstart+1]);else r=ce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(F(e,!1),e.strm.avail_out===0))return Z}return e.insert=e.strstart<R-1?e.strstart:R-1,n===se?(F(e,!0),e.strm.avail_out===0?ye:Pe):e.last_lit&&(F(e,!1),e.strm.avail_out===0)?Z:it},ze=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<j){if(me(e),e.lookahead<j&&n===Ee)return Z;if(e.lookahead===0)break}if(t=0,e.lookahead>=R&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+R-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=R-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-j&&(e.match_length=Ri(e,t),e.match_length<=5&&(e.strategy===_a||e.match_length===R&&e.strstart-e.match_start>4096)&&(e.match_length=R-1)),e.prev_length>=R&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-R,r=ce(e,e.strstart-1-e.prev_match,e.prev_length-R),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+R-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=R-1,e.strstart++,r&&(F(e,!1),e.strm.avail_out===0))return Z}else if(e.match_available){if(r=ce(e,0,e.window[e.strstart-1]),r&&F(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ce(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<R-1?e.strstart:R-1,n===se?(F(e,!0),e.strm.avail_out===0?ye:Pe):e.last_lit&&(F(e,!1),e.strm.avail_out===0)?Z:it},Pa=(e,n)=>{let t,r,i,a;const f=e.window;for(;;){if(e.lookahead<=oe){if(me(e),e.lookahead<=oe&&n===Ee)return Z;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=R&&e.strstart>0&&(i=e.strstart-1,r=f[i],r===f[++i]&&r===f[++i]&&r===f[++i])){a=e.strstart+oe;do;while(r===f[++i]&&r===f[++i]&&r===f[++i]&&r===f[++i]&&r===f[++i]&&r===f[++i]&&r===f[++i]&&r===f[++i]&&i<a);e.match_length=oe-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=R?(t=ce(e,1,e.match_length-R),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(F(e,!1),e.strm.avail_out===0))return Z}return e.insert=0,n===se?(F(e,!0),e.strm.avail_out===0?ye:Pe):e.last_lit&&(F(e,!1),e.strm.avail_out===0)?Z:it},Da=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(me(e),e.lookahead===0)){if(n===Ee)return Z;break}if(e.match_length=0,t=ce(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(F(e,!1),e.strm.avail_out===0))return Z}return e.insert=0,n===se?(F(e,!0),e.strm.avail_out===0?ye:Pe):e.last_lit&&(F(e,!1),e.strm.avail_out===0)?Z:it};function X(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}const Ue=[new X(0,0,0,0,La),new X(4,4,8,4,Zt),new X(4,5,16,8,Zt),new X(4,6,32,32,Zt),new X(4,4,16,16,ze),new X(8,16,32,32,ze),new X(8,16,128,128,ze),new X(8,32,128,256,ze),new X(32,128,258,1024,ze),new X(32,258,258,4096,ze)],Na=e=>{e.window_size=2*e.w_size,ae(e.head),e.max_lazy_match=Ue[e.level].max_lazy,e.good_match=Ue[e.level].good_length,e.nice_match=Ue[e.level].nice_length,e.max_chain_length=Ue[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=R-1,e.match_available=0,e.ins_h=0};function Ma(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Sa*2),this.dyn_dtree=new Uint16Array((2*Ea+1)*2),this.bl_tree=new Uint16Array((2*Aa+1)*2),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(za+1),this.heap=new Uint16Array(2*tn+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*tn+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ti=e=>{if(!e||!e.state)return le(e,W);e.total_in=e.total_out=0,e.data_type=ba;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?zt:ve,e.adler=n.wrap===2?0:1,n.last_flush=Ee,oa(n),K},Oi=e=>{const n=Ti(e);return n===K&&Na(e.state),n},Za=(e,n)=>!e||!e.state||e.state.wrap!==2?W:(e.state.gzhead=n,K),Ii=(e,n,t,r,i,a)=>{if(!e)return W;let f=1;if(n===ha&&(n=6),r<0?(f=0,r=-r):r>15&&(f=2,r-=16),i<1||i>wa||t!==St||r<8||r>15||n<0||n>9||a<0||a>va)return le(e,W);r===8&&(r=9);const l=new Ma;return e.state=l,l.strm=e,l.wrap=f,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+R-1)/R),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=a,l.method=t,Oi(e)},Ca=(e,n)=>Ii(e,n,St,ya,ma,ga),Fa=(e,n)=>{let t,r;if(!e||!e.state||n>zn||n<0)return e?le(e,W):W;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===Fe&&n!==se)return le(e,e.avail_out===0?Mt:W);i.strm=e;const a=i.last_flush;if(i.last_flush=n,i.status===zt)if(i.wrap===2)e.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,i.gzhead.time&255),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,i.level===9?2:i.strategy>=at||i.level<2?4:0),T(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,i.gzhead.extra.length&255),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=C(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=nn):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,i.level===9?2:i.strategy>=at||i.level<2?4:0),T(i,Ta),i.status=ve);else{let f=St+(i.w_bits-8<<4)<<8,l=-1;i.strategy>=at||i.level<2?l=0:i.level<6?l=1:i.level===6?l=2:l=3,f|=l<<6,i.strstart!==0&&(f|=Ra),f+=31-f%31,i.status=ve,Ze(i,f),i.strstart!==0&&(Ze(i,e.adler>>>16),Ze(i,e.adler&65535)),e.adler=1}if(i.status===nn)if(i.gzhead.extra){for(t=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),re(e),t=i.pending,i.pending===i.pending_buf_size));)T(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=_t)}else i.status=_t;if(i.status===_t)if(i.gzhead.name){t=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),re(e),t=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,T(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),r===0&&(i.gzindex=0,i.status=pt)}else i.status=pt;if(i.status===pt)if(i.gzhead.comment){t=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),re(e),t=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,T(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>t&&(e.adler=C(e.adler,i.pending_buf,i.pending-t,t)),r===0&&(i.status=vt)}else i.status=vt;if(i.status===vt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&re(e),i.pending+2<=i.pending_buf_size&&(T(i,e.adler&255),T(i,e.adler>>8&255),e.adler=0,i.status=ve)):i.status=ve),i.pending!==0){if(re(e),e.avail_out===0)return i.last_flush=-1,K}else if(e.avail_in===0&&Tn(n)<=Tn(a)&&n!==se)return le(e,Mt);if(i.status===Fe&&e.avail_in!==0)return le(e,Mt);if(e.avail_in!==0||i.lookahead!==0||n!==Ee&&i.status!==Fe){let f=i.strategy===at?Da(i,n):i.strategy===pa?Pa(i,n):Ue[i.level].func(i,n);if((f===ye||f===Pe)&&(i.status=Fe),f===Z||f===ye)return e.avail_out===0&&(i.last_flush=-1),K;if(f===it&&(n===sa?ca(i):n!==zn&&(la(i,0,0,!1),n===ua&&(ae(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),re(e),e.avail_out===0))return i.last_flush=-1,K}return n!==se?K:i.wrap<=0?Rn:(i.wrap===2?(T(i,e.adler&255),T(i,e.adler>>8&255),T(i,e.adler>>16&255),T(i,e.adler>>24&255),T(i,e.total_in&255),T(i,e.total_in>>8&255),T(i,e.total_in>>16&255),T(i,e.total_in>>24&255)):(Ze(i,e.adler>>>16),Ze(i,e.adler&65535)),re(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?K:Rn)},Ua=e=>{if(!e||!e.state)return W;const n=e.state.status;return n!==zt&&n!==nn&&n!==_t&&n!==pt&&n!==vt&&n!==ve&&n!==Fe?le(e,W):(e.state=null,n===ve?le(e,da):K)},Ba=(e,n)=>{let t=n.length;if(!e||!e.state)return W;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==zt||r.lookahead)return W;if(i===1&&(e.adler=Xe(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(ae(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(n.subarray(t-r.w_size,t),0),n=c,t=r.w_size}const a=e.avail_in,f=e.next_in,l=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,me(r);r.lookahead>=R;){let c=r.strstart,o=r.lookahead-(R-1);do r.ins_h=ue(r,r.ins_h,r.window[c+R-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--o);r.strstart=c,r.lookahead=R-1,me(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=R-1,r.match_available=0,e.next_in=f,e.input=l,e.avail_in=a,r.wrap=i,K};var $a=Ca,Ha=Ii,qa=Oi,Wa=Ti,Ga=Za,ja=Fa,Xa=Ua,Ya=Ba,Ka="pako deflate (from Nodeca project)",$e={deflateInit:$a,deflateInit2:Ha,deflateReset:qa,deflateResetKeep:Wa,deflateSetHeader:Ga,deflate:ja,deflateEnd:Xa,deflateSetDictionary:Ya,deflateInfo:Ka};const Qa=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var Ja=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Qa(t,r)&&(e[r]=t[r])}}return e},Va=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;const t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let f=e[r];t.set(f,i),i+=f.length}return t},Rt={assign:Ja,flattenChunks:Va};let Li=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Li=!1}const Ye=new Uint8Array(256);for(let e=0;e<256;e++)Ye[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ye[254]=Ye[254]=1;var eo=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,f=e.length,l=0;for(i=0;i<f;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<f&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(l),a=0,i=0;a<l;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<f&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|t&63):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|t&63):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|t&63);return n};const to=(e,n)=>{if(n<65534&&e.subarray&&Li)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t};var no=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let f=e[r++];if(f<128){a[i++]=f;continue}let l=Ye[f];if(l>4){a[i++]=65533,r+=l-1;continue}for(f&=l===2?31:l===3?15:7;l>1&&r<t;)f=f<<6|e[r++]&63,l--;if(l>1){a[i++]=65533;continue}f<65536?a[i++]=f:(f-=65536,a[i++]=55296|f>>10&1023,a[i++]=56320|f&1023)}return to(a,i)},io=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+Ye[e[t]]>n?t:n},Ke={string2buf:eo,buf2string:no,utf8border:io};function ro(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Pi=ro;const Di=Object.prototype.toString,{Z_NO_FLUSH:ao,Z_SYNC_FLUSH:oo,Z_FULL_FLUSH:lo,Z_FINISH:fo,Z_OK:mt,Z_STREAM_END:co,Z_DEFAULT_COMPRESSION:so,Z_DEFAULT_STRATEGY:uo,Z_DEFLATED:ho}=nt;function rt(e){this.options=Rt.assign({level:so,method:ho,chunkSize:16384,windowBits:15,memLevel:8,strategy:uo},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pi,this.strm.avail_out=0;let t=$e.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==mt)throw new Error(Ie[t]);if(n.header&&$e.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=Ke.string2buf(n.dictionary):Di.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,t=$e.deflateSetDictionary(this.strm,r),t!==mt)throw new Error(Ie[t]);this._dict_set=!0}}rt.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?fo:ao,typeof e=="string"?t.input=Ke.string2buf(e):Di.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===oo||a===lo)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=$e.deflate(t,a),i===co)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=$e.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===mt;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};rt.prototype.onData=function(e){this.chunks.push(e)};rt.prototype.onEnd=function(e){e===mt&&(this.result=Rt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function un(e,n){const t=new rt(n);if(t.push(e,!0),t.err)throw t.msg||Ie[t.err];return t.result}function _o(e,n){return n=n||{},n.raw=!0,un(e,n)}function po(e,n){return n=n||{},n.gzip=!0,un(e,n)}var vo=rt,go=un,bo=_o,wo=po,yo=nt,mo={Deflate:vo,deflate:go,deflateRaw:bo,gzip:wo,constants:yo};const ot=30,xo=12;var ko=function(n,t){let r,i,a,f,l,c,o,s,p,d,u,h,A,v,x,z,E,_,S,I,m,w,y,g;const b=n.state;r=n.next_in,y=n.input,i=r+(n.avail_in-5),a=n.next_out,g=n.output,f=a-(t-n.avail_out),l=a+(n.avail_out-257),c=b.dmax,o=b.wsize,s=b.whave,p=b.wnext,d=b.window,u=b.hold,h=b.bits,A=b.lencode,v=b.distcode,x=(1<<b.lenbits)-1,z=(1<<b.distbits)-1;e:do{h<15&&(u+=y[r++]<<h,h+=8,u+=y[r++]<<h,h+=8),E=A[u&x];t:for(;;){if(_=E>>>24,u>>>=_,h-=_,_=E>>>16&255,_===0)g[a++]=E&65535;else if(_&16){S=E&65535,_&=15,_&&(h<_&&(u+=y[r++]<<h,h+=8),S+=u&(1<<_)-1,u>>>=_,h-=_),h<15&&(u+=y[r++]<<h,h+=8,u+=y[r++]<<h,h+=8),E=v[u&z];n:for(;;){if(_=E>>>24,u>>>=_,h-=_,_=E>>>16&255,_&16){if(I=E&65535,_&=15,h<_&&(u+=y[r++]<<h,h+=8,h<_&&(u+=y[r++]<<h,h+=8)),I+=u&(1<<_)-1,I>c){n.msg="invalid distance too far back",b.mode=ot;break e}if(u>>>=_,h-=_,_=a-f,I>_){if(_=I-_,_>s&&b.sane){n.msg="invalid distance too far back",b.mode=ot;break e}if(m=0,w=d,p===0){if(m+=o-_,_<S){S-=_;do g[a++]=d[m++];while(--_);m=a-I,w=g}}else if(p<_){if(m+=o+p-_,_-=p,_<S){S-=_;do g[a++]=d[m++];while(--_);if(m=0,p<S){_=p,S-=_;do g[a++]=d[m++];while(--_);m=a-I,w=g}}}else if(m+=p-_,_<S){S-=_;do g[a++]=d[m++];while(--_);m=a-I,w=g}for(;S>2;)g[a++]=w[m++],g[a++]=w[m++],g[a++]=w[m++],S-=3;S&&(g[a++]=w[m++],S>1&&(g[a++]=w[m++]))}else{m=a-I;do g[a++]=g[m++],g[a++]=g[m++],g[a++]=g[m++],S-=3;while(S>2);S&&(g[a++]=g[m++],S>1&&(g[a++]=g[m++]))}}else if(_&64){n.msg="invalid distance code",b.mode=ot;break e}else{E=v[(E&65535)+(u&(1<<_)-1)];continue n}break}}else if(_&64)if(_&32){b.mode=xo;break e}else{n.msg="invalid literal/length code",b.mode=ot;break e}else{E=A[(E&65535)+(u&(1<<_)-1)];continue t}break}}while(r<i&&a<l);S=h>>3,r-=S,h-=S<<3,u&=(1<<h)-1,n.next_in=r,n.next_out=a,n.avail_in=r<i?5+(i-r):5-(r-i),n.avail_out=a<l?257+(l-a):257-(a-l),b.hold=u,b.bits=h};const Re=15,On=852,In=592,Ln=0,Ct=1,Pn=2,Eo=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ao=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),So=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zo=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ro=(e,n,t,r,i,a,f,l)=>{const c=l.bits;let o=0,s=0,p=0,d=0,u=0,h=0,A=0,v=0,x=0,z=0,E,_,S,I,m,w=null,y=0,g;const b=new Uint16Array(Re+1),O=new Uint16Array(Re+1);let L=null,H=0,U,B,q;for(o=0;o<=Re;o++)b[o]=0;for(s=0;s<r;s++)b[n[t+s]]++;for(u=c,d=Re;d>=1&&b[d]===0;d--);if(u>d&&(u=d),d===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<d&&b[p]===0;p++);for(u<p&&(u=p),v=1,o=1;o<=Re;o++)if(v<<=1,v-=b[o],v<0)return-1;if(v>0&&(e===Ln||d!==1))return-1;for(O[1]=0,o=1;o<Re;o++)O[o+1]=O[o]+b[o];for(s=0;s<r;s++)n[t+s]!==0&&(f[O[n[t+s]]++]=s);if(e===Ln?(w=L=f,g=19):e===Ct?(w=Eo,y-=257,L=Ao,H-=257,g=256):(w=So,L=zo,g=-1),z=0,s=0,o=p,m=a,h=u,A=0,S=-1,x=1<<u,I=x-1,e===Ct&&x>On||e===Pn&&x>In)return 1;for(;;){U=o-A,f[s]<g?(B=0,q=f[s]):f[s]>g?(B=L[H+f[s]],q=w[y+f[s]]):(B=96,q=0),E=1<<o-A,_=1<<h,p=_;do _-=E,i[m+(z>>A)+_]=U<<24|B<<16|q|0;while(_!==0);for(E=1<<o-1;z&E;)E>>=1;if(E!==0?(z&=E-1,z+=E):z=0,s++,--b[o]===0){if(o===d)break;o=n[t+f[s]]}if(o>u&&(z&I)!==S){for(A===0&&(A=u),m+=p,h=o-A,v=1<<h;h+A<d&&(v-=b[h+A],!(v<=0));)h++,v<<=1;if(x+=1<<h,e===Ct&&x>On||e===Pn&&x>In)return 1;S=z&I,i[S]=u<<24|h<<16|m-a|0}}return z!==0&&(i[m+z]=o-A<<24|64<<16|0),l.bits=u,0};var He=Ro;const To=0,Ni=1,Mi=2,{Z_FINISH:Dn,Z_BLOCK:Oo,Z_TREES:lt,Z_OK:xe,Z_STREAM_END:Io,Z_NEED_DICT:Lo,Z_STREAM_ERROR:G,Z_DATA_ERROR:Zi,Z_MEM_ERROR:Ci,Z_BUF_ERROR:Po,Z_DEFLATED:Nn}=nt,Fi=1,Mn=2,Zn=3,Cn=4,Fn=5,Un=6,Bn=7,$n=8,Hn=9,qn=10,xt=11,Q=12,Ft=13,Wn=14,Ut=15,Gn=16,jn=17,Xn=18,Yn=19,ft=20,ct=21,Kn=22,Qn=23,Jn=24,Vn=25,ei=26,Bt=27,ti=28,ni=29,D=30,Ui=31,Do=32,No=852,Mo=592,Zo=15,Co=Zo,ii=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Fo(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bi=e=>{if(!e||!e.state)return G;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Fi,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(No),n.distcode=n.distdyn=new Int32Array(Mo),n.sane=1,n.back=-1,xe},$i=e=>{if(!e||!e.state)return G;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,Bi(e)},Hi=(e,n)=>{let t;if(!e||!e.state)return G;const r=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+1,n<48&&(n&=15)),n&&(n<8||n>15)?G:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,$i(e))},qi=(e,n)=>{if(!e)return G;const t=new Fo;e.state=t,t.window=null;const r=Hi(e,n);return r!==xe&&(e.state=null),r},Uo=e=>qi(e,Co);let ri=!0,$t,Ht;const Bo=e=>{if(ri){$t=new Int32Array(512),Ht=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(He(Ni,e.lens,0,288,$t,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;He(Mi,e.lens,0,32,Ht,0,e.work,{bits:5}),ri=!1}e.lencode=$t,e.lenbits=9,e.distcode=Ht,e.distbits=5},Wi=(e,n,t,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},$o=(e,n)=>{let t,r,i,a,f,l,c,o,s,p,d,u,h,A,v=0,x,z,E,_,S,I,m,w;const y=new Uint8Array(4);let g,b;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return G;t=e.state,t.mode===Q&&(t.mode=Ft),f=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,o=t.hold,s=t.bits,p=l,d=c,w=xe;e:for(;;)switch(t.mode){case Fi:if(t.wrap===0){t.mode=Ft;break}for(;s<16;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(t.wrap&2&&o===35615){t.check=0,y[0]=o&255,y[1]=o>>>8&255,t.check=C(t.check,y,2,0),o=0,s=0,t.mode=Mn;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((o&255)<<8)+(o>>8))%31){e.msg="incorrect header check",t.mode=D;break}if((o&15)!==Nn){e.msg="unknown compression method",t.mode=D;break}if(o>>>=4,s-=4,m=(o&15)+8,t.wbits===0)t.wbits=m;else if(m>t.wbits){e.msg="invalid window size",t.mode=D;break}t.dmax=1<<t.wbits,e.adler=t.check=1,t.mode=o&512?qn:Q,o=0,s=0;break;case Mn:for(;s<16;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(t.flags=o,(t.flags&255)!==Nn){e.msg="unknown compression method",t.mode=D;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=D;break}t.head&&(t.head.text=o>>8&1),t.flags&512&&(y[0]=o&255,y[1]=o>>>8&255,t.check=C(t.check,y,2,0)),o=0,s=0,t.mode=Zn;case Zn:for(;s<32;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.head&&(t.head.time=o),t.flags&512&&(y[0]=o&255,y[1]=o>>>8&255,y[2]=o>>>16&255,y[3]=o>>>24&255,t.check=C(t.check,y,4,0)),o=0,s=0,t.mode=Cn;case Cn:for(;s<16;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.head&&(t.head.xflags=o&255,t.head.os=o>>8),t.flags&512&&(y[0]=o&255,y[1]=o>>>8&255,t.check=C(t.check,y,2,0)),o=0,s=0,t.mode=Fn;case Fn:if(t.flags&1024){for(;s<16;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.length=o,t.head&&(t.head.extra_len=o),t.flags&512&&(y[0]=o&255,y[1]=o>>>8&255,t.check=C(t.check,y,2,0)),o=0,s=0}else t.head&&(t.head.extra=null);t.mode=Un;case Un:if(t.flags&1024&&(u=t.length,u>l&&(u=l),u&&(t.head&&(m=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+u),m)),t.flags&512&&(t.check=C(t.check,r,u,a)),l-=u,a+=u,t.length-=u),t.length))break e;t.length=0,t.mode=Bn;case Bn:if(t.flags&2048){if(l===0)break e;u=0;do m=r[a+u++],t.head&&m&&t.length<65536&&(t.head.name+=String.fromCharCode(m));while(m&&u<l);if(t.flags&512&&(t.check=C(t.check,r,u,a)),l-=u,a+=u,m)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=$n;case $n:if(t.flags&4096){if(l===0)break e;u=0;do m=r[a+u++],t.head&&m&&t.length<65536&&(t.head.comment+=String.fromCharCode(m));while(m&&u<l);if(t.flags&512&&(t.check=C(t.check,r,u,a)),l-=u,a+=u,m)break e}else t.head&&(t.head.comment=null);t.mode=Hn;case Hn:if(t.flags&512){for(;s<16;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(o!==(t.check&65535)){e.msg="header crc mismatch",t.mode=D;break}o=0,s=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Q;break;case qn:for(;s<32;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}e.adler=t.check=ii(o),o=0,s=0,t.mode=xt;case xt:if(t.havedict===0)return e.next_out=f,e.avail_out=c,e.next_in=a,e.avail_in=l,t.hold=o,t.bits=s,Lo;e.adler=t.check=1,t.mode=Q;case Q:if(n===Oo||n===lt)break e;case Ft:if(t.last){o>>>=s&7,s-=s&7,t.mode=Bt;break}for(;s<3;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}switch(t.last=o&1,o>>>=1,s-=1,o&3){case 0:t.mode=Wn;break;case 1:if(Bo(t),t.mode=ft,n===lt){o>>>=2,s-=2;break e}break;case 2:t.mode=jn;break;case 3:e.msg="invalid block type",t.mode=D}o>>>=2,s-=2;break;case Wn:for(o>>>=s&7,s-=s&7;s<32;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if((o&65535)!==(o>>>16^65535)){e.msg="invalid stored block lengths",t.mode=D;break}if(t.length=o&65535,o=0,s=0,t.mode=Ut,n===lt)break e;case Ut:t.mode=Gn;case Gn:if(u=t.length,u){if(u>l&&(u=l),u>c&&(u=c),u===0)break e;i.set(r.subarray(a,a+u),f),l-=u,a+=u,c-=u,f+=u,t.length-=u;break}t.mode=Q;break;case jn:for(;s<14;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(t.nlen=(o&31)+257,o>>>=5,s-=5,t.ndist=(o&31)+1,o>>>=5,s-=5,t.ncode=(o&15)+4,o>>>=4,s-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=D;break}t.have=0,t.mode=Xn;case Xn:for(;t.have<t.ncode;){for(;s<3;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.lens[O[t.have++]]=o&7,o>>>=3,s-=3}for(;t.have<19;)t.lens[O[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,g={bits:t.lenbits},w=He(To,t.lens,0,19,t.lencode,0,t.work,g),t.lenbits=g.bits,w){e.msg="invalid code lengths set",t.mode=D;break}t.have=0,t.mode=Yn;case Yn:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[o&(1<<t.lenbits)-1],x=v>>>24,z=v>>>16&255,E=v&65535,!(x<=s);){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(E<16)o>>>=x,s-=x,t.lens[t.have++]=E;else{if(E===16){for(b=x+2;s<b;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(o>>>=x,s-=x,t.have===0){e.msg="invalid bit length repeat",t.mode=D;break}m=t.lens[t.have-1],u=3+(o&3),o>>>=2,s-=2}else if(E===17){for(b=x+3;s<b;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}o>>>=x,s-=x,m=0,u=3+(o&7),o>>>=3,s-=3}else{for(b=x+7;s<b;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}o>>>=x,s-=x,m=0,u=11+(o&127),o>>>=7,s-=7}if(t.have+u>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=D;break}for(;u--;)t.lens[t.have++]=m}}if(t.mode===D)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=D;break}if(t.lenbits=9,g={bits:t.lenbits},w=He(Ni,t.lens,0,t.nlen,t.lencode,0,t.work,g),t.lenbits=g.bits,w){e.msg="invalid literal/lengths set",t.mode=D;break}if(t.distbits=6,t.distcode=t.distdyn,g={bits:t.distbits},w=He(Mi,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,g),t.distbits=g.bits,w){e.msg="invalid distances set",t.mode=D;break}if(t.mode=ft,n===lt)break e;case ft:t.mode=ct;case ct:if(l>=6&&c>=258){e.next_out=f,e.avail_out=c,e.next_in=a,e.avail_in=l,t.hold=o,t.bits=s,ko(e,d),f=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,l=e.avail_in,o=t.hold,s=t.bits,t.mode===Q&&(t.back=-1);break}for(t.back=0;v=t.lencode[o&(1<<t.lenbits)-1],x=v>>>24,z=v>>>16&255,E=v&65535,!(x<=s);){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(z&&!(z&240)){for(_=x,S=z,I=E;v=t.lencode[I+((o&(1<<_+S)-1)>>_)],x=v>>>24,z=v>>>16&255,E=v&65535,!(_+x<=s);){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}o>>>=_,s-=_,t.back+=_}if(o>>>=x,s-=x,t.back+=x,t.length=E,z===0){t.mode=ei;break}if(z&32){t.back=-1,t.mode=Q;break}if(z&64){e.msg="invalid literal/length code",t.mode=D;break}t.extra=z&15,t.mode=Kn;case Kn:if(t.extra){for(b=t.extra;s<b;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,s-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Qn;case Qn:for(;v=t.distcode[o&(1<<t.distbits)-1],x=v>>>24,z=v>>>16&255,E=v&65535,!(x<=s);){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(!(z&240)){for(_=x,S=z,I=E;v=t.distcode[I+((o&(1<<_+S)-1)>>_)],x=v>>>24,z=v>>>16&255,E=v&65535,!(_+x<=s);){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}o>>>=_,s-=_,t.back+=_}if(o>>>=x,s-=x,t.back+=x,z&64){e.msg="invalid distance code",t.mode=D;break}t.offset=E,t.extra=z&15,t.mode=Jn;case Jn:if(t.extra){for(b=t.extra;s<b;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,s-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=D;break}t.mode=Vn;case Vn:if(c===0)break e;if(u=d-c,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=D;break}u>t.wnext?(u-=t.wnext,h=t.wsize-u):h=t.wnext-u,u>t.length&&(u=t.length),A=t.window}else A=i,h=f-t.offset,u=t.length;u>c&&(u=c),c-=u,t.length-=u;do i[f++]=A[h++];while(--u);t.length===0&&(t.mode=ct);break;case ei:if(c===0)break e;i[f++]=t.length,c--,t.mode=ct;break;case Bt:if(t.wrap){for(;s<32;){if(l===0)break e;l--,o|=r[a++]<<s,s+=8}if(d-=c,e.total_out+=d,t.total+=d,d&&(e.adler=t.check=t.flags?C(t.check,i,d,f-d):Xe(t.check,i,d,f-d)),d=c,(t.flags?o:ii(o))!==t.check){e.msg="incorrect data check",t.mode=D;break}o=0,s=0}t.mode=ti;case ti:if(t.wrap&&t.flags){for(;s<32;){if(l===0)break e;l--,o+=r[a++]<<s,s+=8}if(o!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=D;break}o=0,s=0}t.mode=ni;case ni:w=Io;break e;case D:w=Zi;break e;case Ui:return Ci;case Do:default:return G}return e.next_out=f,e.avail_out=c,e.next_in=a,e.avail_in=l,t.hold=o,t.bits=s,(t.wsize||d!==e.avail_out&&t.mode<D&&(t.mode<Bt||n!==Dn))&&Wi(e,e.output,e.next_out,d-e.avail_out),p-=e.avail_in,d-=e.avail_out,e.total_in+=p,e.total_out+=d,t.total+=d,t.wrap&&d&&(e.adler=t.check=t.flags?C(t.check,i,d,e.next_out-d):Xe(t.check,i,d,e.next_out-d)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Q?128:0)+(t.mode===ft||t.mode===Ut?256:0),(p===0&&d===0||n===Dn)&&w===xe&&(w=Po),w},Ho=e=>{if(!e||!e.state)return G;let n=e.state;return n.window&&(n.window=null),e.state=null,xe},qo=(e,n)=>{if(!e||!e.state)return G;const t=e.state;return t.wrap&2?(t.head=n,n.done=!1,xe):G},Wo=(e,n)=>{const t=n.length;let r,i,a;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==xt)?G:r.mode===xt&&(i=1,i=Xe(i,n,t,0),i!==r.check)?Zi:(a=Wi(e,n,t,t),a?(r.mode=Ui,Ci):(r.havedict=1,xe))};var Go=$i,jo=Hi,Xo=Bi,Yo=Uo,Ko=qi,Qo=$o,Jo=Ho,Vo=qo,el=Wo,tl="pako inflate (from Nodeca project)",te={inflateReset:Go,inflateReset2:jo,inflateResetKeep:Xo,inflateInit:Yo,inflateInit2:Ko,inflate:Qo,inflateEnd:Jo,inflateGetHeader:Vo,inflateSetDictionary:el,inflateInfo:tl};function nl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var il=nl;const Gi=Object.prototype.toString,{Z_NO_FLUSH:rl,Z_FINISH:al,Z_OK:Qe,Z_STREAM_END:qt,Z_NEED_DICT:Wt,Z_STREAM_ERROR:ol,Z_DATA_ERROR:ai,Z_MEM_ERROR:ll}=nt;function dn(e){this.options=Rt.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pi,this.strm.avail_out=0;let t=te.inflateInit2(this.strm,n.windowBits);if(t!==Qe)throw new Error(Ie[t]);if(this.header=new il,te.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Ke.string2buf(n.dictionary):Gi.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=te.inflateSetDictionary(this.strm,n.dictionary),t!==Qe)))throw new Error(Ie[t])}dn.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,f,l;if(this.ended)return!1;for(n===~~n?f=n:f=n===!0?al:rl,Gi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=te.inflate(t,f),a===Wt&&i&&(a=te.inflateSetDictionary(t,i),a===Qe?a=te.inflate(t,f):a===ai&&(a=Wt));t.avail_in>0&&a===qt&&t.state.wrap>0&&e[t.next_in]!==0;)te.inflateReset(t),a=te.inflate(t,f);switch(a){case ol:case ai:case Wt:case ll:return this.onEnd(a),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||a===qt))if(this.options.to==="string"){let c=Ke.utf8border(t.output,t.next_out),o=t.next_out-c,s=Ke.buf2string(t.output,c);t.next_out=o,t.avail_out=r-o,o&&t.output.set(t.output.subarray(c,c+o),0),this.onData(s)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Qe&&l===0)){if(a===qt)return a=te.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};dn.prototype.onData=function(e){this.chunks.push(e)};dn.prototype.onEnd=function(e){e===Qe&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const{Deflate:Al,deflate:fl,deflateRaw:Sl,gzip:zl}=mo;var cl=fl;function sl(e){const n=t=>{switch(t){case"Z":return"S";case"S":return"Z";case"L":return"J";case"J":return"L";default:return t}};return[...e].map(t=>n(t)).join("")}function Rl(e){const t=e.map(r=>ge.decoder.decode(r)).flat().map(r=>({field:r.field}));return ge.encoder.encode(t)}function Tl(e){const t=ge.decoder.decode(e).map(r=>({field:r.field,comment:sl(r.comment)}));return ge.encoder.encode(t)}const ul=async e=>(await new Promise(t=>{const r=new FileReader;r.onload=()=>t(r.result),r.readAsDataURL(new Blob([e]))})).split(",",2)[1];async function dl(e){const n={T:15,I:10,O:5,L:4,J:12,S:8,Z:2,_:1,X:21},t=[...e.str().split(`
`).reverse().filter(a=>a!="__________").join(`
`)].filter(a=>a!=`
`),r=Uint8Array.from(t.map(a=>n[a]));return"Techmino Field:"+await ul(cl(r))}const hl={class:"field-div"},_l={class:"button-container"},ji=kt({__name:"VTetrisField",props:{page:{type:Object,default:null},height:{type:Number,default:20},cell_size:{type:Number,default:20},mirror:{type:Boolean,default:!1},allow_edit:{type:Boolean,default:!1},display_copy:{type:Boolean,default:!0}},emits:["field_change"],setup(e,{emit:n}){const t={T:["#b451ac","#e56add"],I:["#41afde","#43d3ff"],O:["#f7d33e","#fff952"],L:["#ef9535","#ffbf60"],J:["#1983bf","#1ba6f9"],S:["#66c65c","#88ee86"],Z:["#ef624d","#ff9484"],X:["#686868","#949494"],_:["#686868","#949494"]},r={T:["#b451ac","#e56add"],I:["#41afde","#43d3ff"],O:["#f7d33e","#fff952"],J:["#ef9535","#ffbf60"],L:["#1983bf","#1ba6f9"],Z:["#66c65c","#88ee86"],S:["#ef624d","#ff9484"],X:["#686868","#949494"],_:["#686868","#949494"]},i=V("Copy");function a(){return l.mirror?r:t}async function f(){const w=await dl(l.page.field);console.log("export field:",w),navigator.clipboard.writeText(w),i.value="Done",setTimeout(()=>{i.value="Copy"},1e3)}const l=e,c=n;let o=V(l.page);var s=null;const p=V();function d(w,y){const g=y.field,b=l.height-1;for(var O=0;O<20;O++)for(var L=0;L<10;L++){let q=l.mirror?9-L:L;var H=g.at(q,O);H!="_"&&(w.fillStyle=a()[H][0],w.fillRect(L*l.cell_size,(b-O)*l.cell_size,l.cell_size,l.cell_size),w.fillStyle=a()[H][1],w.fillRect(L*l.cell_size,(b-O)*l.cell_size,l.cell_size,-l.cell_size/5))}if(!y.operation)return;const U=y.mino(),B=U.positions();w.lineWidth=2,w.lineJoin="round",w.strokeStyle=a()[U.type][0];for(var O=0;O<4;O++)w.strokeRect(B[O].x*l.cell_size+l.cell_size/10,(b-B[O].y)*l.cell_size+l.cell_size/10,l.cell_size*.8,l.cell_size*.8)}const u=rn(()=>{let w=BigInt(0);const y=o.value.field;for(var g=0;g<20;g++)for(var b=0;b<10;b++){var O=y.at(b,g);const L=BigInt(g*10+b);O!="_"&&(w+=BigInt(1)<<L)}return w});function h(){const w=Object.assign(Object.create(Object.getPrototypeOf(o.value)),o.value);let y=w.field.copy();for(let g=0;g<l.height;g++)for(let b=0;b<10;b++)y.set(b,g,"_");w.field=y,o.value=w,l.allow_edit&&c("field_change",u.value)}const A=V(!1),v=V({x:-1,y:-1}),x=V("");function z(w){if(!l.allow_edit)return;A.value=!0;const{realX:y,realY:g}=I(w),b=o.value.field.at(y,g);x.value=b==="_"?"X":"_",m(y,g,x.value),v.value={x:y,y:g}}function E(w){if(!l.allow_edit||!A.value)return;const{realX:y,realY:g}=I(w);(y!==v.value.x||g!==v.value.y)&&(m(y,g,x.value),v.value={x:y,y:g})}function _(){A.value=!1}function S(){A.value=!1}function I(w){if(!p.value)return{realX:-1,realY:-1};const y=p.value.getBoundingClientRect(),g=p.value.width/y.width,b=p.value.height/y.height,O=Math.floor((w.clientX-y.left)*g/l.cell_size),L=l.height-1-Math.floor((w.clientY-y.top)*b/l.cell_size);return{realX:O,realY:L}}function m(w,y,g){const b=Object.assign(Object.create(Object.getPrototypeOf(o.value)),o.value);let O=b.field.copy();O.set(w,y,g),b.field=O,o.value=b,l.allow_edit&&c("field_change",u.value)}return Qi(()=>{p.value&&(p.value.width=10*l.cell_size,p.value.height=l.height*l.cell_size,s=p.value.getContext("2d"),s&&(d(s,o.value),l.allow_edit&&c("field_change",u.value)))}),vn(l,()=>{o.value=l.page,l.allow_edit&&c("field_change",u.value)}),vn(o,()=>{s&&(s.canvas.height=l.height*l.cell_size,s.clearRect(0,0,s.canvas.width,s.canvas.height),d(s,o.value))}),(w,y)=>(ne(),ie("div",hl,[he("canvas",{class:"vt-field",ref_key:"canvas",ref:p,onMousedown:z,onMousemove:E,onMouseup:_,onMouseleave:S},null,544),he("div",_l,[e.display_copy?(ne(),ie("button",{key:0,type:"button",class:"action-btn copy-btn",onClick:f,title:"copy as techmino field"},jt(i.value),1)):Xt("",!0),e.allow_edit?(ne(),ie("button",{key:1,type:"button",class:"action-btn clear-btn",onClick:h,title:"clear field"},"Clear")):Xt("",!0)])]))}}),pl={class:"fumen-list"},vl={class:"fumen-item"},gl=kt({__name:"TFumenList",props:{fumen:{type:String,default:"v115@vhAAgH"},height:{type:Number,default:20},cell_size:{type:Number,default:20},mirror:{type:Boolean,default:!1},display_copy:{type:Boolean,default:!0}},setup(e){const n=e,t=rn(()=>ge.decoder.decode(n.fumen));return(r,i)=>(ne(),ie("div",pl,[(ne(!0),ie(oi,null,Ji(t.value,(a,f)=>(ne(),ie("div",vl,[st(ji,{page:a,height:n.height,cell_size:n.cell_size,mirror:n.mirror,display_copy:n.display_copy},null,8,["page","height","cell_size","mirror","display_copy"]),he("div",null,"("+jt(f+1)+") "+jt(a.comment),1)]))),256))]))}});let Ce=null;async function bl(){return Ce||(Ce=await Vi(()=>import("./pcf_wasm.Be8mfJno.js"),[]),await Ce.default()),Ce.get_pc}const wl={class:"fumen-list"},yl={class:"fumen-item"},ml={class:"fumen-ctl"},xl={key:0},Gt="v115@vhAAgH",kl=kt({__name:"PCF",props:{initial_field_fumen:{default:"v115@9gD8DeF8CeG8BeH8CeC8JeAgH"},sequence:{default:"ITSZ"}},setup(e){const n=e,t=rn(()=>ge.decoder.decode(n.initial_field_fumen)[0]),r=V(BigInt(0)),i=V(Gt),a=V(n.sequence);function f(c){r.value=c}async function l(){let c=(await bl())(r.value,a.value.toUpperCase());c=="v115@"&&(c=Gt),i.value=c}return(c,o)=>(ne(),ie(oi,null,[he("div",wl,[he("div",yl,[st(ji,{allow_edit:!0,page:t.value,onField_change:f,height:10},null,8,["page"])])]),he("div",ml,[st(Tr,{onClick:l},{default:er(()=>[...o[1]||(o[1]=[rr("Solve",-1)])]),_:1}),tr(he("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>a.value=s),onKeyup:ir(l,["enter"])},null,544),[[nr,a.value]])]),i.value!==Gt?(ne(),ie("div",xl,[st(gl,{fumen:i.value,height:10,display_copy:!1},null,8,["fumen"])])):Xt("",!0)],64))}}),Ol=ar(kl,[["__scopeId","data-v-b16d2c07"]]);export{Ol as P,gl as _,ji as a,Tr as b,Tl as c,Rl as m,ge as t};
